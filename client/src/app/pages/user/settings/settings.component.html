<app-navbar></app-navbar>
<div class="flex justify-center">
  <div class="flex flex-col justify-center w-[24rem] mb-4">
    <div class="ml-2 text-zinc-500 text-xs font-bold" value="top" selected>
      Account settings
    </div>
    <div class="flex flex-col">
      <div class="flex flex-col justify-center w-full">
        <!-- <button
          class="flex flex-row justify-between items-center w-full mt-2 rounded px-3 pt-2 pb-2 bg-zinc-900"
        > -->
        <button
          #passwordButton
          (click)="togglePassword()"
          class="flex flex-row justify-between items-center w-full mt-2 rounded-x rounded-t rounded-b border-zinc-700 px-3 pt-2 pb-2 bg-zinc-900"
        >
          <span class="text-sm text-zinc-200">Change password</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            class="w-4 h-4 fill-zinc-200"
          >
            <path
              fill-rule="evenodd"
              d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <div #passwordBox class="hidden flex justify-center">
          <div class="flex flex-col justify-center w-96 max-w-3xl">
            <div
              class="bg-zinc-900 px-3 pt-3 pb-3 flex flex-col justify-between"
            >
              <p
                class="text-xs text-green-500 mb-2"
                [ngClass]="isUpdateUserPasswordSuccess ? 'block' : 'hidden'"
              >
                Successfully updated password
              </p>
              <p
                class="text-xs text-red-500 mb-2"
                [ngClass]="isPasswordValid ? 'hidden' : 'block'"
              >
                Requires at least one uppercase letter, one lowercase letter,
                one number, one special character, and a minimum length of 8
                characters.
              </p>
              <input
                type="password"
                id="current-password"
                #currentPassword
                (click)="reset()"
                [ngClass]="isPasswordValid ? '' : 'outline outline-red-500'"
                class="mb-2 px-2 py-1 bg-zinc-800 text-zinc-300 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
                placeholder="Current Password"
              />
              <p
                class="text-xs text-red-500 mb-2"
                [ngClass]="isPasswordValid ? 'hidden' : 'block'"
              >
                Requires at least one uppercase letter, one lowercase letter,
                one number, one special character, and a minimum length of 8
                characters.
              </p>
              <input
                type="password"
                id="new-password"
                #newPassword
                (click)="reset()"
                [ngClass]="isPasswordValid ? '' : 'outline outline-red-500'"
                class="mb-2 px-2 py-1 bg-zinc-800 text-zinc-300 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
                placeholder="New Password"
              />
              <p
                class="text-xs text-red-500 mb-2"
                [ngClass]="isPasswordValid ? 'hidden' : 'block'"
              >
                Passwords do not match or this password is invalid.
              </p>
              <input
                type="password"
                id="confirmPassword"
                #confirmPassword
                (click)="reset()"
                [ngClass]="
                  isConfirmPasswordValid ? '' : 'outline outline-red-500'
                "
                class="px-2 py-1 bg-zinc-800 text-zinc-300 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
                placeholder="Confirm Password"
              />
            </div>
            <div
              class="flex border-t border-zinc-700 rounded-b px-3 py-3 bg-zinc-900"
            >
              <button
                type="button"
                (click)="validatePassword()"
                class="bg-indigo-600 rounded px-2 py-1 text-xs font-semibold text-zinc-50 hover:outline-none hover:bg-indigo-700"
              >
                Update
              </button>
            </div>
          </div>
        </div>
        <button
          #usernameButton
          (click)="toggleUsername()"
          class="flex flex-row justify-between items-center w-full mt-2 rounded-x rounded-t rounded-b border-zinc-700 px-3 pt-2 pb-2 bg-zinc-900"
        >
          <span class="text-sm text-zinc-200">Change username</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            class="w-4 h-4 fill-zinc-200"
          >
            <path
              fill-rule="evenodd"
              d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <div #usernameBox class="hidden flex justify-center">
          <div class="flex flex-col justify-center w-96 max-w-3xl">
            <div
              class="bg-zinc-900 px-3 pt-3 pb-3 flex flex-col justify-between"
            >
              <p
                class="text-xs text-green-500 mb-2"
                [ngClass]="isUpdateUserUsernameSuccess ? 'block' : 'hidden'"
              >
                Successfully updated to: {{ userUsername }}
              </p>
              <p
                class="text-xs text-red-500 mb-2"
                [ngClass]="isUsernameValid ? 'hidden' : 'block'"
              >
                Allows letters, numbers, and underscores. Must be 3-20
                characters long.
              </p>
              <input
                type="text"
                id="username"
                #username
                (click)="reset()"
                [ngClass]="isUsernameValid ? '' : 'outline outline-red-500'"
                class="px-2 py-1 bg-zinc-800 text-zinc-300 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
                placeholder="{{ userUsername }}"
                value="{{ userUsername }}"
              />
            </div>
            <div
              class="flex border-t border-zinc-700 rounded-b px-3 py-3 bg-zinc-900"
            >
              <button
                type="button"
                (click)="validateUsername()"
                class="bg-indigo-600 rounded px-2 py-1 text-xs font-semibold text-zinc-50 hover:outline-none hover:bg-indigo-700"
              >
                Update
              </button>
            </div>
          </div>
        </div>
        <button
          #emailButton
          (click)="toggleEmail()"
          class="flex flex-row justify-between items-center w-full mt-2 rounded-x rounded-t rounded-b border-zinc-700 px-3 pt-2 pb-2 bg-zinc-900"
        >
          <span class="text-sm text-zinc-200">Change email</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            class="w-4 h-4 fill-zinc-200"
          >
            <path
              fill-rule="evenodd"
              d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <div #emailBox class="hidden flex justify-center">
          <div class="flex flex-col justify-center w-96 max-w-3xl">
            <div
              class="bg-zinc-900 px-3 pt-3 pb-3 flex flex-col justify-between"
            >
              <p
                class="text-xs text-green-500 mb-2"
                [ngClass]="isUpdateUserEmailSuccess ? 'block' : 'hidden'"
              >
                Successfully updated to: {{ userEmail }}
              </p>
              <p
                class="text-xs text-red-500 mb-2"
                [ngClass]="isEmailValid ? 'hidden' : 'block'"
              >
                Please use a valid email address.
              </p>
              <input
                type="email"
                id="email"
                #email
                (click)="reset()"
                [ngClass]="isEmailValid ? '' : 'outline outline-red-500'"
                class="px-2 py-1 bg-zinc-800 text-zinc-300 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
                placeholder="{{ userEmail }}"
                value="{{ userEmail }}"
              />
            </div>
            <div
              class="flex border-t border-zinc-700 rounded-b px-3 py-3 bg-zinc-900"
            >
              <button
                type="button"
                (click)="validateEmail()"
                class="bg-indigo-600 rounded px-2 py-1 text-xs font-semibold text-zinc-50 hover:outline-none hover:bg-indigo-700"
              >
                Update
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="flex justify-center">
  <div class="flex flex-col justify-center w-[24rem] mb-4">
    <div class="ml-2 text-zinc-500 text-xs font-bold" value="top" selected>
      Communities settings
    </div>
    <div class="flex flex-col">
      <div class="flex flex-col justify-center w-full">
        <!-- <button
          class="flex flex-row justify-between items-center w-full mt-2 rounded px-3 pt-2 pb-2 bg-zinc-900"
        > -->
        <button
          #myCommunitiesButton
          (click)="toggleMyCommunities()"
          class="flex flex-row justify-between items-center w-full mt-2 rounded-x rounded-t rounded-b border-zinc-700 px-3 pt-2 pb-2 bg-zinc-900"
        >
          <span class="text-sm text-zinc-200">My communities</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            class="w-4 h-4 fill-zinc-200"
          >
            <path
              fill-rule="evenodd"
              d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <div #myCommunitiesBox class="hidden flex flex-col justify-center">
          <div class="flex flex-col justify-center w-96 max-w-3xl">
            <div
              *ngFor="let c of communities"
              class="bg-zinc-900 px-3 pt-3 flex flex-col justify-between"
            >
              <div
                *ngIf="communities.length === 0"
                #deleteCommunity
                class="flex align-center justify-between px-2 py-1 bg-zinc-800 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
              >
                <a routerLink="/c/{{ c.name_for_display }}">{{
                  c.name_for_display
                }}</a>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  (click)="toggleDeleteCommunity(c.name_for_display)"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  class="w-4 h-4 stroke-red-600 self-center cursor-pointer"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
                  />
                </svg>
              </div>
              <div
                *ngIf="communities.length > 0"
                #deleteCommunity
                class="flex align-center justify-between px-2 py-1 bg-zinc-800 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
              >
                <a routerLink="/c/{{ c.name_for_display }}">{{
                  c.name_for_display
                }}</a>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  (click)="toggleDeleteCommunity(c.name_for_display)"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  class="w-4 h-4 stroke-red-600 self-center cursor-pointer"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
                  />
                </svg>
              </div>
            </div>
            <!-- Used as last padding, this poor fella -->
            <div class="bg-zinc-900 pb-3 rounded-b"></div>
            <div
              #deleteCommunityBox
              class="hidden flex flex-col border-t border-zinc-700 rounded-b pt-2 pb-3 py-3 bg-zinc-900"
            >
              <span class="text-sm text-zinc-200 mb-2 self-center"
                >Are you sure you want to delete
                <span class="text-red-500 font-bold">{{
                  deleteCommunityName
                }}</span
                >?</span
              >
              <div class="self-center">
                <button
                  type="button"
                  (click)="putCommunity()"
                  class="change-click-to-delete"
                  class="bg-red-700 rounded px-2 py-1 mr-2 text-xs font-semibold text-zinc-50 hover:outline-none hover:bg-red-800"
                >
                  Delete
                </button>
                <button
                  type="button"
                  (click)="toggleDeleteCommunity(deleteCommunityName)"
                  class="bg-indigo-600 rounded px-2 py-1 text-xs font-semibold text-zinc-50 hover:outline-none hover:bg-indigo-700"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="flex flex-col justify-center w-full">
        <!-- <button
          class="flex flex-row justify-between items-center w-full mt-2 rounded px-3 pt-2 pb-2 bg-zinc-900"
        > -->
        <button
          #addCommunityButton
          (click)="toggleAddCommunity()"
          class="flex flex-row justify-between items-center w-full mt-2 rounded-x rounded-t rounded-b border-zinc-700 px-3 pt-2 pb-2 bg-zinc-900"
        >
          <span class="text-sm text-zinc-200">Add community</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            class="w-4 h-4 fill-zinc-200"
          >
            <path
              fill-rule="evenodd"
              d="M12.53 16.28a.75.75 0 01-1.06 0l-7.5-7.5a.75.75 0 011.06-1.06L12 14.69l6.97-6.97a.75.75 0 111.06 1.06l-7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
        <div #addCommunityBox class="hidden flex justify-center">
          <div class="flex flex-col justify-center w-96 max-w-3xl">
            <div
              class="bg-zinc-900 px-3 pt-3 pb-3 flex flex-col justify-between"
            >
              <p
                class="text-xs text-red-500 mb-2"
                [ngClass]="isAddCommunityValid ? 'hidden' : 'block'"
              >
                Please use a valid community name.
              </p>
              <p
                class="text-xs text-green-500 mb-2"
                [ngClass]="isAddCommunitySuccess ? 'block' : 'hidden'"
              >
                Successfully added: {{ addedCommunity }}
              </p>
              <input
                type="text"
                id="add-community"
                #addCommunity
                (click)="reset()"
                [ngClass]="isAddCommunityValid ? '' : 'outline outline-red-500'"
                class="px-2 py-1 bg-zinc-800 text-zinc-300 placeholder:text-zinc-500 rounded text-sm text-zinc-50 focus:outline-none"
                placeholder="CommunityName"
              />
            </div>
            <div
              class="flex border-t border-zinc-700 rounded-b px-3 py-3 bg-zinc-900"
            >
              <button
                type="button"
                (click)="validateAddCommunity()"
                class="bg-indigo-600 rounded px-2 py-1 text-xs font-semibold text-zinc-50 hover:outline-none hover:bg-indigo-700"
              >
                Submit
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
